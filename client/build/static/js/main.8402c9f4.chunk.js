(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},105:function(e,t,a){},270:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(88),o=a.n(c),s=(a(101),a(10)),u=a(11),i=a(13),l=a(12),h=a(14),p=(a(103),a(105),a(272)),d=a(275),g=a(274),f=a(45),m=a(4),v=a.n(m),b=a(16),y=a(17),E=a.n(y),O=function(){return function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/logout");case 2:a=e.sent,console.log("logout response --\x3e",a),t({type:"logout_user",payload:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},w=a(8),j=a(273),C=a(271),k=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderNav",value:function(e){return e&&e.isAuthenticated?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down "},r.a.createElement("li",null,r.a.createElement(C.a,{to:"/page/one"},"Agrregation")),r.a.createElement("li",null,r.a.createElement(C.a,{to:"/page/two"},"Geo")),r.a.createElement("li",null,r.a.createElement("button",{id:"logout-button",className:"waves-effect waves-light btn-flat",onClick:this.props.logoutUser},"Logout"))):r.a.createElement(n.Fragment,null)}},{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"header-nav"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(C.a,{to:"/home",className:"main-logo brand-logo"},"Logo"),this.renderNav(this.props.auth))))}}]),t}(n.Component);var _=Object(w.b)(function(e){return{auth:e.auth}},{logoutUser:O})(k),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).login=function(){var e=a.state,t=e.username,n=e.password;""!==t&&""!==n&&a.props.loginUser(t,n)},a.handleChange=function(e){return function(t){a.setState(Object(f.a)({},e,t.target.value))}},a.state={username:"",password:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.auth;return r.a.createElement("div",null,e&&e.isAuthenticated&&r.a.createElement(j.a,{to:"/home"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"loginForm",className:"col s6 offset-s3 card"},r.a.createElement("h4",{className:"center"},"Login"),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleChange("username"),placeholder:"Username"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"password",id:"password",value:this.state.password,onChange:this.handleChange("password"),placeholder:"Password"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.login},"Login"))))))}}]),t}(n.Component);var N=Object(w.b)(function(e){return{auth:e.auth}},{loginUser:function(e,t){return function(){var a=Object(b.a)(v.a.mark(function a(n){var r;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.post("/login",{username:e,password:t});case 2:r=a.sent,console.log("returned user --\x3e",r),n({type:"login_user",payload:r});case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}})(x),A=a(25),D=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchActivityCount(10),this.props.fetchRegionCount(10),this.props.fetchSectorCount(10),this.props.fetchCountryCount(10)}},{key:"createChartData",value:function(e,t,a){var n={};if(e&&e[t]&&e[t].length>0){for(var r=["rgba(255,99,132,","rgba(140, 234, 110,","rgba(228, 90, 68,","rgba(56, 187, 156,"],c=[],o=[],s=0;s<e[t].length;s++){var u=Object.values(e[t][s]);o.push(u[0]),c.push(u[1])}n.labels=o;var i=[{label:t,backgroundColor:"".concat(r[a],"0.5)"),borderColor:"".concat(r[a],"1)"),borderWidth:1,hoverBackgroundColor:"".concat(r[a],"0.7)"),hoverBorderColor:"".concat(r[a],"1)"),data:c}];if("country"===t){i[0].backgroundColor=["rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)"]}n.datasets=i}return n}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.home;return r.a.createElement("div",null,(!t||!t.isAuthenticated)&&r.a.createElement(j.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Sectors"),r.a.createElement(A.c,{data:this.createChartData(a,"sector",0),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Activity"),r.a.createElement(A.a,{data:this.createChartData(a,"activity",1),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Countries"),r.a.createElement(A.b,{data:this.createChartData(a,"country",2),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Regions"),r.a.createElement(A.a,{data:this.createChartData(a,"region",3),height:250})))))}}]),t}(n.Component);var S=Object(w.b)(function(e){return{auth:e.auth,home:e.home}},{logoutUser:O,fetchActivityCount:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/total/activity/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_activity_count",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},fetchCountryCount:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/total/country/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_country_count",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},fetchRegionCount:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/total/region/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_region_count",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},fetchSectorCount:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/total/sector/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_sector_count",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(D),U=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCountrySectorAgg(10),this.props.fetchSectorActivityAgg(10)}},{key:"createChartData",value:function(e,t){var a={};if(e&&e[t]&&Object.keys(e[t]).length>0){var n=["rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)","rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)"],r=e[t];console.log(r);for(var c=[],o=Object.keys(r.data),s=0;s<o.length;s++){var u=Object.values(r.data[o[s]]),i=u.reduce(function(e,t){return e+t},0),l=Object.keys(r.data[o[s]]);console.log(u,l);for(var h=0;h<u.length;h++){var p={};p.label=l[h],p.data=[(120*(parseInt(u[h],10)/i).toFixed(2)).toFixed(1)],p.backgroundColor=n[h],p.stack=r.mainCategory[s],c.push(p)}}a.datasets=c}return console.log(a),a}},{key:"barChartOptions",value:function(e,t){var a={};return e&&e[t]&&Object.keys(e[t]).length>0&&(a={scales:{xAxes:[{stacked:!0,ticks:{callback:function(a,n,r){return console.log(e[t].mainCategory[n]),a}}}],yAxes:[{stacked:!0}]}}),a}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.agg;return r.a.createElement("div",null,(!t||!t.isAuthenticated)&&r.a.createElement(j.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h3",null,"Distribution of Activities across Sectors"),r.a.createElement(A.a,{data:this.createChartData(a,"sagg"),options:this.barChartOptions(a,"sagg"),height:250})),r.a.createElement("div",{className:"col s12"},r.a.createElement("h3",null,"Distribution of Sectors across Countries"),r.a.createElement(A.a,{data:this.createChartData(a,"sagg"),options:this.barChartOptions(a,"sagg"),height:250})))))}}]),t}(n.Component);var T=Object(w.b)(function(e){return{auth:e.auth,agg:e.agg}},{logoutUser:O,fetchCountrySectorAgg:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/agg/country/sector/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_country_sector_agg",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},fetchSectorActivityAgg:function(e){return function(){var t=Object(b.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/analytics/agg/sector/activity/".concat(e),{withCredentials:!0});case 2:n=t.sent,console.log(n),a({type:"fetch_sector_activity_agg",payload:n});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(U),L=a(92),M=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCountrySum()}},{key:"createChartData",value:function(e){var t=[["Country","Total Loan Value(USD)"]];if(console.log(e),e&&e.sum&&e.sum.length>0)for(var a=e.sum,n=0;n<a.length;n++){var r=[];r.push(a[n].country),r.push(a[n].count),t.push(r)}return t}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.geo;return r.a.createElement("div",null,(!t||!t.isAuthenticated)&&r.a.createElement(j.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h4",null,"Total Loans given in a Country"),r.a.createElement(L.a,{chartType:"GeoChart",data:this.createChartData(a),mapsApiKey:"AIzaSyDYjXmUwL6crbuft4eGaG8Er754uYKrpiY",rootProps:{"data-testid":"1"}})))))}}]),t}(n.Component);var B=Object(w.b)(function(e){return{auth:e.auth,geo:e.geo}},{logoutUser:O,fetchCountrySum:function(){return function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/analytics/country/sum",{withCredentials:!0});case 2:a=e.sent,console.log(a),t({type:"fetch_country_sum",payload:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(M),F=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted"),this.props.fetchUser()}},{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(d.a,null,r.a.createElement(g.a,{exact:!0,key:"0",path:"/",component:N}),r.a.createElement(g.a,{exact:!0,key:"1",path:"/home",component:S}),r.a.createElement(g.a,{exact:!0,key:"2",path:"/page/one",component:T}),r.a.createElement(g.a,{exact:!0,key:"3",path:"/page/two",component:B})))}}]),t}(n.Component);var G=Object(w.b)(function(e){return e},{fetchUser:function(){return function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/user/current",{withCredentials:!0});case 2:a=e.sent,console.log("current user --\x3e",a),t({type:"fetch_user",payload:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(94),R=a(23),P=a(15),W={isAuthenticated:!1},X=Object(R.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"login_user":var n=t.payload.data;return console.log(!n.err),a.isAuthenticated=!n.err,a=Object(P.a)({},a,{data:n});case"logout_user":return a.isAuthenticated=!1,a;case"fetch_user":return n=t.payload.data,a.isAuthenticated=!n.err,a;default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_region_count":var a=t.payload.data.data;return Object(P.a)({},e,{region:a});case"fetch_activity_count":var n=t.payload.data.data;return Object(P.a)({},e,{activity:n});case"fetch_country_count":var r=t.payload.data.data;return Object(P.a)({},e,{country:r});case"fetch_sector_count":var c=t.payload.data.data;return Object(P.a)({},e,{sector:c});default:return e}},geo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_country_sum":var a=t.payload.data.data;return Object(P.a)({},e,{sum:a});default:return e}},agg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_country_sector_agg":var a=t.payload.data;return console.log(t.payload.data),Object(P.a)({},e,{csagg:a});case"fetch_sector_activity_agg":var n=t.payload.data;return Object(P.a)({},e,{sagg:n});default:return e}}}),Y=function(e,t){return"logout_user"===t.type&&(e=void 0),X(e,t)},J=a(95),K=a.n(J),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,z=Object(R.e)(Y,{},V(Object(R.a)(I.a,K.a)));o.a.render(r.a.createElement(w.a,{store:z},r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){e.exports=a(270)}},[[96,2,1]]]);
//# sourceMappingURL=main.8402c9f4.chunk.js.map