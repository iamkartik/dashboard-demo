(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,a){},104:function(t,e,a){},270:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(88),o=a.n(c),u=(a(100),a(13)),s=a(14),i=a(16),l=a(15),h=a(17),p=(a(102),a(104),a(272)),d=a(275),f=a(274),g=a(45),v=a(4),m=a.n(v),b=a(10),y=a(11),w=a.n(y),E=function(){return function(){var t=Object(b.a)(m.a.mark(function t(e){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/logout");case 2:a=t.sent,e({type:"logout_user",payload:a});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},j=a(8),O=a(273),C=a(271),k=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"renderNav",value:function(t){return t&&t.isAuthenticated?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down "},r.a.createElement("li",null,r.a.createElement(C.a,{to:"/page/one"},"Agrregation")),r.a.createElement("li",null,r.a.createElement(C.a,{to:"/page/two"},"Geo")),r.a.createElement("li",null,r.a.createElement("button",{id:"logout-button",className:"waves-effect waves-light btn-flat",onClick:this.props.logoutUser},"Logout"))):r.a.createElement(n.Fragment,null)}},{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"header-nav"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(C.a,{to:"/home",className:"main-logo brand-logo"},"Kiva"),this.renderNav(this.props.auth))))}}]),e}(n.Component);var _=Object(j.b)(function(t){return{auth:t.auth}},{logoutUser:E})(k),x=function(t){function e(t){var a;return Object(u.a)(this,e),(a=Object(i.a)(this,Object(l.a)(e).call(this,t))).login=function(){var t=a.state,e=t.username,n=t.password;""!==e&&""!==n&&a.props.loginUser(e,n)},a.handleChange=function(t){return function(e){a.setState(Object(g.a)({},t,e.target.value))}},a.state={username:"",password:""},a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.auth;return r.a.createElement("div",null,t&&t.isAuthenticated&&r.a.createElement(O.a,{to:"/home"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"loginForm",className:"col s6 offset-s3 card"},r.a.createElement("h4",{className:"center"},"Login"),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleChange("username"),placeholder:"Username"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"password",id:"password",value:this.state.password,onChange:this.handleChange("password"),placeholder:"Password"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.login},"Login"))))))}}]),e}(n.Component);var N=Object(j.b)(function(t){return{auth:t.auth}},{loginUser:function(t,e){return function(){var a=Object(b.a)(m.a.mark(function a(n){var r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.post("/login",{username:t,password:e});case 2:r=a.sent,n({type:"login_user",payload:r});case 4:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()}})(x),A=a(24),D=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchActivityCount(10),this.props.fetchRegionCount(10),this.props.fetchSectorCount(10),this.props.fetchCountryCount(10)}},{key:"createChartData",value:function(t,e,a){var n={};if(t&&t[e]&&t[e].length>0){for(var r=["rgba(255,99,132,","rgba(140, 234, 110,","rgba(228, 90, 68,","rgba(56, 187, 156,"],c=[],o=[],u=0;u<t[e].length;u++){var s=Object.values(t[e][u]);o.push(s[0]),c.push(s[1])}n.labels=o;var i=[{label:e,backgroundColor:"".concat(r[a],"0.5)"),borderColor:"".concat(r[a],"1)"),borderWidth:1,hoverBackgroundColor:"".concat(r[a],"0.7)"),hoverBorderColor:"".concat(r[a],"1)"),data:c}];if("country"===e){i[0].backgroundColor=["rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)"]}n.datasets=i}return n}},{key:"render",value:function(){var t=this.props,e=t.auth,a=t.home;return r.a.createElement("div",null,(!e||!e.isAuthenticated)&&r.a.createElement(O.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Sectors"),r.a.createElement(A.c,{data:this.createChartData(a,"sector",0),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Activity"),r.a.createElement(A.a,{data:this.createChartData(a,"activity",1),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Countries"),r.a.createElement(A.b,{data:this.createChartData(a,"country",2),height:250})),r.a.createElement("div",{className:"col s6 card"},r.a.createElement("h4",null,"Top Regions"),r.a.createElement(A.a,{data:this.createChartData(a,"region",3),height:250})))))}}]),e}(n.Component);var S=Object(j.b)(function(t){return{auth:t.auth,home:t.home}},{logoutUser:E,fetchActivityCount:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/total/activity/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_activity_count",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchCountryCount:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/total/country/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_country_count",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchRegionCount:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/total/region/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_region_count",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchSectorCount:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/total/sector/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_sector_count",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(D),U=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchCountryAverage(10),this.props.fetchSectorAverage(10)}},{key:"createChartData",value:function(t,e){var a={};if(t&&t[e]&&Object.keys(t[e]).length>0){for(var n=["rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)","rgba(56, 187, 156,0.8)","rgba(243,220,97,0.8)","rgba(243,146,97,0.8)","rgba(234,107,141,0.8)","rgba(140, 234, 110,0.5)","rgba(67, 229, 249,0.7)","rgba(243,97,97,0.8)","rgba(168, 228, 218,0.8)","rgba(228, 90, 68,0.7)","rgba(101,97,243,0.8)"],r=t[e],c=[],o=Object.keys(r.data),u=0;u<o.length;u++)for(var s=Object.values(r.data[o[u]]),i=s.reduce(function(t,e){return t+e},0),l=Object.keys(r.data[o[u]]),h=0;h<s.length;h++){var p={};p.label=l[h],p.data=[(120*(parseInt(s[h],10)/i).toFixed(2)).toFixed(1)],p.backgroundColor=n[h],p.stack=r.mainCategory[u],c.push(p)}a.datasets=c}return a}},{key:"barChartOptions",value:function(t,e){var a={};return t&&t[e]&&Object.keys(t[e]).length>0&&(a={scales:{xAxes:[{stacked:!0,ticks:{callback:function(t,e,a){return t}}}],yAxes:[{stacked:!0}]}}),a}},{key:"createChartDataNew",value:function(t,e,a){var n={};if(console.log(t),t&&t[e]&&t[e].data.length>0){console.log(t);for(var r=["rgba(255,99,132,","rgba(140, 234, 110,","rgba(228, 90, 68,","rgba(56, 187, 156,"],c=[],o=[],u=0;u<t[e].data.length;u++){var s=Object.values(t[e].data[u]);o.push(s[0]),c.push(parseFloat(s[1]).toFixed(2))}n.labels=o;var i=[{label:e,backgroundColor:"".concat(r[a],"0.5)"),borderColor:"".concat(r[a],"1)"),borderWidth:1,hoverBackgroundColor:"".concat(r[a],"0.7)"),hoverBorderColor:"".concat(r[a],"1)"),data:c}];n.datasets=i}return n}},{key:"render",value:function(){var t=this.props,e=t.auth,a=t.agg;return r.a.createElement("div",null,(!e||!e.isAuthenticated)&&r.a.createElement(O.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h3",null,"Average Loan Amount Across Sectors"),r.a.createElement(A.a,{data:this.createChartDataNew(a,"sector",1),height:250})),r.a.createElement("div",{className:"col s12"},r.a.createElement("h3",null,"Average Loan Amount Across Countries"),r.a.createElement(A.c,{data:this.createChartDataNew(a,"country",3),height:250})))))}}]),e}(n.Component);var L=Object(j.b)(function(t){return{auth:t.auth,agg:t.agg}},{logoutUser:E,fetchCountrySectorAgg:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/agg/country/sector/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_country_sector_agg",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchSectorActivityAgg:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/agg/sector/activity/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_sector_activity_agg",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchSectorAverage:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/agg/loan_amount/sector/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_sector_avg",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchCountryAverage:function(t){return function(){var e=Object(b.a)(m.a.mark(function e(a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/analytics/agg/loan_amount/country/".concat(t),{withCredentials:!0});case 2:n=e.sent,a({type:"fetch_country_avg",payload:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(U),T=a(92),B=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchCountrySum()}},{key:"createChartData",value:function(t){var e=[["Country","Total Loan Value(USD)"]];if(t&&t.sum&&t.sum.length>0)for(var a=t.sum,n=0;n<a.length;n++){var r=[];r.push(a[n].country),r.push(a[n].count),e.push(r)}return e}},{key:"render",value:function(){var t=this.props,e=t.auth,a=t.geo;return r.a.createElement("div",null,(!e||!e.isAuthenticated)&&r.a.createElement(O.a,{to:"/"}),r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h4",null,"Total Loans given in a Country"),r.a.createElement(T.a,{chartType:"GeoChart",data:this.createChartData(a),mapsApiKey:"AIzaSyDYjXmUwL6crbuft4eGaG8Er754uYKrpiY",rootProps:{"data-testid":"1"}})))))}}]),e}(n.Component);var F=Object(j.b)(function(t){return{auth:t.auth,geo:t.geo}},{logoutUser:E,fetchCountrySum:function(){return function(){var t=Object(b.a)(m.a.mark(function t(e){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/analytics/country/sum",{withCredentials:!0});case 2:a=t.sent,e({type:"fetch_country_sum",payload:a});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(B),G=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(d.a,null,r.a.createElement(f.a,{exact:!0,key:"0",path:"/",component:N}),r.a.createElement(f.a,{exact:!0,key:"1",path:"/home",component:S}),r.a.createElement(f.a,{exact:!0,key:"2",path:"/page/one",component:L}),r.a.createElement(f.a,{exact:!0,key:"3",path:"/page/two",component:F})))}}]),e}(n.Component);var M=Object(j.b)(function(t){return t},{fetchUser:function(){return function(){var t=Object(b.a)(m.a.mark(function t(e){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/user/current",{withCredentials:!0});case 2:a=t.sent,e({type:"fetch_user",payload:a});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(94),I=a(26),K=a(9),R={isAuthenticated:!1},Y=Object(I.c)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0,a={};switch(e.type){case"login_user":var n=e.payload.data;return a.isAuthenticated=!n.err,a=Object(K.a)({},a,{data:n});case"logout_user":return a.isAuthenticated=!1,a;case"fetch_user":return n=e.payload.data,a.isAuthenticated=!n.err,a;default:return t}},home:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"fetch_region_count":var a=e.payload.data.data;return Object(K.a)({},t,{region:a});case"fetch_activity_count":var n=e.payload.data.data;return Object(K.a)({},t,{activity:n});case"fetch_country_count":var r=e.payload.data.data;return Object(K.a)({},t,{country:r});case"fetch_sector_count":var c=e.payload.data.data;return Object(K.a)({},t,{sector:c});default:return t}},geo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"fetch_country_sum":var a=e.payload.data.data;return Object(K.a)({},t,{sum:a});default:return t}},agg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"fetch_country_sector_agg":var a=e.payload.data;return Object(K.a)({},t,{csagg:a});case"fetch_sector_activity_agg":var n=e.payload.data;return Object(K.a)({},t,{sagg:n});case"fetch_sector_avg":var r=e.payload.data;return Object(K.a)({},t,{sector:r});case"fetch_country_avg":var c=e.payload.data;return Object(K.a)({},t,{country:c});default:return t}}}),J=function(t,e){return"logout_user"===e.type&&(t=void 0),Y(t,e)},P=(a(269),Object(I.d)(J,{},Object(I.a)(W.a)));o.a.render(r.a.createElement(j.a,{store:P},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},95:function(t,e,a){t.exports=a(270)}},[[95,2,1]]]);
//# sourceMappingURL=main.72f90574.chunk.js.map